@inherits TeEditorBase

@if (ItemsEnumerable != null)
{
    <MudTable
        T="(int index, object item)"
        Items="@ItemsEnumerable"
        Dense="Options.Style.Dense"
        Hover="Options.Style.Hover"
        Striped="Options.Style.Striped"
        Bordered="Options.Style.Bordered"
    >
         <ToolBarContent>
            <MudText Typo="Typo.h6">
                @(Options.Title ?? string.Empty)
            </MudText>
            <MudSpacer />
            @if (ArrayOption.EnableAddItem)
            {
                <div style="width:200px;">
                    <MudSelect
                        @bind-Value="addType"
                        Label="Type"
                        Variant="Variant.Outlined"
                        Placeholder="Selected the type to add"
                    >
                        <MudSelectItem Value="@("string")">string</MudSelectItem>
                        <MudSelectItem Value="@("int")">int</MudSelectItem>
                        <MudSelectItem Value="@("float")">float</MudSelectItem>
                        <MudSelectItem Value="@("bool")">bool</MudSelectItem>
                    </MudSelect>
                </div>
                <TvActionButton Item="@(new object())" Action="AddItemAction" />
            }
        </ToolBarContent>
        <HeaderContent>
            @if (ArrayOption.ShowNumber)
            {
                <MudTh>
                    Number
                </MudTh>
            }
            <MudTh>
                Content
            </MudTh>
            @if (ArrayOption.EnableAddItem)
            {
                <MudTh>
                    ...
                </MudTh>
            }
        </HeaderContent>
         <RowTemplate>
            @if (ArrayOption.ShowNumber)
            {
                <MudTd>
                    @(context.index + 1)
                </MudTd>
            }
            <MudTd>
                 <TeElementEditor
                    Data="context.item"
                    DataChanged="@(item => OnDataChanged(item, context.index))"
                    Options="Options"
                    Parent="@ItemsEnumerable.Select(a => a.item)"
                />
             </MudTd>
            @if(ArrayOption.EnableAddItem)
            {
                <MudTd>
                    <TvActionButton Item="context.item" Action="RemoveItemAction" />
                </MudTd>
            }
        </RowTemplate>
    </MudTable>
}